<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>Anypoint Connector Certification Process</title>
<link rel="stylesheet" href="./assets/mule.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Anypoint Connector Certification Process</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel1">
<li><a href="#_about_certification_process">About Certification Process</a></li>
<li><a href="#_stage_1_onboard">Stage 1: OnBoard</a></li>
<li><a href="#_stage_2_development">Stage 2: Development</a></li>
<li><a href="#_stage_3_certify">Stage 3: Certify</a></li>
<li><a href="#_stage_4_publish">Stage 4: Publish</a></li>
<li><a href="#_release_re_certification">Release Re-Certification</a></li>
</ul>
</li>
<li><a href="#_coding_standards_and_best_practices">Coding Standards and Best Practices</a>
<ul class="sectlevel1">
<li><a href="#_code_conventions">Code Conventions</a></li>
<li><a href="#_standard_java_coding_conventions">Standard Java Coding Conventions</a></li>
<li><a href="#_maven_conventions_and_setup">Maven Conventions and Setup</a></li>
<li><a href="#_devkit_standards_and_best_practices">DevKit Standards and Best Practices</a></li>
<li><a href="#_connector_demo_example">Connector Demo Example</a></li>
<li><a href="#_appendix">Appendix</a></li>
</ul>
</li>
<li><a href="#_static_code_analysis_and_code_coverage">Static Code Analysis and Code Coverage</a></li>
<li><a href="#_automated_functional_testing">Automated Functional Testing</a></li>
<li><a href="#_studio_functional_test_plugin">Studio Functional Test Plugin</a></li>
<li><a href="#_studio_interoperability_test_plugin">Studio Interoperability Test Plugin</a></li>
<li><a href="#_studio_interoperability_qa">Studio Interoperability QA</a></li>
<li><a href="#_templates">Templates</a>
<ul class="sectlevel1">
<li><a href="#_anypoint_connectors_documentation_template">Anypoint Connectors Documentation Template</a></li>
<li><a href="#_anypoint_connectors_release_notes_template">Anypoint Connectors Release Notes Template</a></li>
<li><a href="#_anypoint_connectors_manual_test_suite_template">Anypoint Connectors Manual Test Suite Template</a></li>
<li><a href="#_certification_checklist">Certification Checklist</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong>version 0.9</strong></p>
</div>
</div>
</div>
<h1 id="_introduction" class="sect0">Introduction</h1>
<div class="openblock partintro">
<div class="content">
<hr>
<div class="paragraph">
<p>MuleSoft has expanded the Anypoint™ Connector offering to enable third-party developers and partners to develop Anypoint Connectors.
All connectors enrolled in the MuleSoft Partner Program must go through a mandatory periodic Certification Process. The Certification Process has been developed to assess the quality of connectors, to ensure that connectors published on the MuleSoft Web page follow industry best practices for development, and to promote trust.
All connectors built by external developers and/or partners go through a Certification Process conducted by MuleSoft’s internal team. Once a connector passes certification, the connector is branded as a MuleSoft-certified connector and published on the MuleSoft web site.</p>
</div>
<div class="paragraph">
<p>The scope of the certification process depends on the composition of the connector. Our approach is to test all parts of the connector to ensure that our mutual customers and their platforms are not put at risk.
The items below are a list of the high-level testing performed on each connector during the certification process:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Automated code scan</p>
</li>
<li>
<p>Manual code review and black box testing</p>
</li>
<li>
<p>Manual and automated tests review</p>
</li>
<li>
<p>Repository structure review</p>
</li>
<li>
<p>Documentation review</p>
</li>
<li>
<p>Compatibility review</p>
</li>
<li>
<p>Static code analysis</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the following sections, each one of the topics to be completed as part of the certification will be described.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about_certification_process">About Certification Process</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The partner Engagement and Certification Process for publishing connectors consists of these stages:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/assets/certification-process-1.png" alt="certification process 1">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stage_1_onboard">Stage 1: OnBoard</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_1_1_legal_engagement">1.1 Legal Engagement</h3>
<div class="paragraph">
<p>During the development process, MuleSoft and a third-party partner, based on a pre-existing partnership agreement, begin the development process.</p>
</div>
</div>
<div class="sect2">
<h3 id="_1_2_leaning_anypoint_connector_devkit">1.2 Leaning Anypoint™ Connector DevKit</h3>
<div class="paragraph">
<p>The MuleSoft Anypoint™ Connector DevKit is the tool for developing Anypoint Connectors. It provides the following features to help you develop or maintain a connector:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Visual design and implementation using Anypoint Studio with an Eclipse-oriented interface that helps simplify and speed up development</p>
</li>
<li>
<p>Maven support for development and building</p>
</li>
<li>
<p>Connector development and packaging tools</p>
</li>
<li>
<p>Authentication support for multiple types of authentication like OAuth and Basic Authentication</p>
</li>
<li>
<p>DataSense support to acquire metadata from endpoints</p>
</li>
<li>
<p>Extensive testing capability</p>
</li>
<li>
<p>Examples, training, and support to simplify startup and solve issues</p>
</li>
<li>
<p>Provides Batch, query pagination, and DataSense Query Language support</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>There is plenty of documentation on Internet about DevKit. Here is a set of links that it could be useful as starting point:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Connector Development Essential: <a href="http://training.mulesoft.com/instructor-led-training/connector-development-essentials-private-class-ilt" class="bare">http://training.mulesoft.com/instructor-led-training/connector-development-essentials-private-class-ilt</a></p>
</li>
<li>
<p>Official DevKit Documentation: <a href="http://www.mulesoft.org/documentation/display/current/Anypoint+Connector+DevKit" class="bare">http://www.mulesoft.org/documentation/display/current/Anypoint+Connector+DevKit</a></p>
</li>
<li>
<p>DevKit Tutorial: <a href="http://www.mulesoft.org/documentation/display/current/Tutorial+-+Barn+Connector" class="bare">http://www.mulesoft.org/documentation/display/current/Tutorial+-+Barn+Connector</a></p>
</li>
<li>
<p>Community Forum: <a href="http://forum.mulesoft.org/mulesoft/products/mulesoft_anypoint_connectors" class="bare">http://forum.mulesoft.org/mulesoft/products/mulesoft_anypoint_connectors</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stage_2_development">Stage 2: Development</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_2_1_design_specification_review">2.1 Design Specification Review</h3>
<div class="paragraph">
<p>The spirit of this document is to help the MuleSoft certification team to have an initial context about the connector to be develop.
MuleSoft certification team will use this document as a starting point to provide feedback and tips about the best use of DevKit and suggesting development patterns.</p>
</div>
<div class="paragraph">
<p>The follow template must be used as starting point
<a href="https://github.com/mulesoft/connector-certification-docs/blob/docs/current/attachments/templates/designSpecificationTemplate.adoc">Design Specification Template</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_2_2_mandatory_practices">2.2  Mandatory Practices</h3>
<div class="paragraph">
<p>In order to quality of the connectors developed, there are a set of practices and artifacts that need to be delivered as part of the connectors development.
Each one of the following practices are aimed to cover different quality aspects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://mulesoft.github.io/connector-certification-docs/current/user-manual.html#_coding_standards_and_best_practices">Coding Standards and Best Practices</a></p>
</li>
<li>
<p><a href="http://mulesoft.github.io/connector-certification-docs/current/user-manual.html#_static_code_analysis_with_sonarqube">Static Code Analysis and Code Coverage</a></p>
</li>
<li>
<p><a href="http://mulesoft.github.io/connector-certification-docs/current/user-manual.html#_automated_functional_testing">Automated Functional Testing</a></p>
</li>
<li>
<p><a href="http://mulesoft.github.io/connector-certification-docs/current/user-manual.html#_studio_interoperability_qa"> Anypoint Studio  Interoperability Testing</a></p>
</li>
<li>
<p><a href="http://mulesoft.github.io/connector-certification-docs/current/user-manual.html#_templates">Connector Release Notes &amp; Documentation</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stage_3_certify">Stage 3: Certify</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this stage, the connector is really to go over the final stage of the certification.</p>
</div>
<div class="sect2">
<h3 id="_3_1_prerequisites">3.1 Prerequisites</h3>
<div class="paragraph">
<p>Before Mule start the certification process, there are a set of prerequisites to be satisfied:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Design Specification Approved:</strong> Design Specification has been approved and all suggested correction has been completed.</p>
</li>
<li>
<p><strong>Source Code Access and Sandbox Credentials:</strong> As part of the certification, MuleSoft will internally run a continue build tests execution and run a set of code inspections to validate the quality of the connector. The next actions are required:</p>
<div class="ulist">
<ul>
<li>
<p>GitHub account read access must be granted to the user connectors-cert-ci (<a href="mailto:connectors-cert-ci@mulesoft.com">connectors-cert-ci@mulesoft.com</a>)</p>
</li>
<li>
<p>In case of being required, provide the Sandbox credentials a .properties used for the testing execution.</p>
</li>
<li>
<p>Create a release branch that will contain all the fixes and suggested during the certification. It should follows the naming convention "release/v&lt;version-number&gt;". Once the certification process has been completed, all the changes will be merged into the master branch and a tag will all the change must be created. It&#8217;s strongly encourage to follow GitFlow branching practices.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Maven Dependencies:</strong> It&#8217;s important that the following things be satisfied:</p>
<div class="ulist">
<ul>
<li>
<p>Connector must be a final version, It could not be an SNAPSHOT</p>
</li>
<li>
<p>There must not be SNAPSHOT dependencies</p>
</li>
<li>
<p>External dependencies must be located in well know public repositories.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Presentation Demo:</strong> The objective of this demo is to go over the functional aspects of the connectors, overview of the system to be connected, underlying integration technology (REST/WSDL/SDK). The audience of this meeting will be Product Managers , Connectors Engineers Leads and QA.</p>
</li>
<li>
<p><strong>Complete Certification Checklist:</strong> Before the connector could start the certification process, it’s responsibility of the partner to validate that all the certification artifacts and requirements have been accomplished. All the required actions are described in the following template and should be completed before submitting the connector for certification. Certification checklist could be found <a href="https://drive.google.com/file/d/0B8N265C555thOG5HZDRTOTEtUXM/view?usp=sharing">here</a></p>
</li>
<li>
<p><strong>Connector documentation:</strong> There must be a public access to the connectors documentation.</p>
</li>
<li>
<p><strong>Versioning:</strong> Connectors must follow versioning best practices. Given a version number MAJOR.MINOR.PATCH increment MAJOR version when you make incompatible API changes,increment MINOR version when you add functionality in a backwards-compatible manner, and increment PATCH version when you make backwards-compatible bug fixes.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_3_2_certifying">3.2 Certifying</h3>
<div class="paragraph">
<p>Once all the previous steps have been completed, MuleSoft engineering team will start running the certification and creating a set of recommendations to be completed before the connector could be released. This is an iterative process where it’s highly probable that our engineering team will have questions about the connector usage. It’s strongly recommended to allocate some time from developers in case of any question arise. Once all the certification criteria has been meet, the connector is ready to move to the next stage. As part of this, the connector forum will be used a the communication chanel between the partner an MuleSoft.</p>
</div>
<div class="paragraph">
<p>MuleSoft will provide a tentative day for starting the certification. We strongly encourage to allocate some development time to start working on the suggested connections and changes. If there is not active partner engagement and activity on fixing the issue in a period of 7 days, the certification will be suspended and a new tentative day will be assigned.</p>
</div>
<div class="paragraph">
<p>MuleSoft will provide a CloudBees (<a href="http://www.cloudbees.com" class="bare">http://www.cloudbees.com</a>) private account that the partner will use to monitor the nightly tests execution and static code analysis reports. It&#8217;s responsibility of the partner to monitor warranty sandbox maintenance and successful tests results.</p>
</div>
<div class="paragraph">
<p>MuleSoft reserves the right to conduct random tests on published connectors. If we find a connector that deviates from any of our requirements, we notify you and provide a timeframe to remedy the issue. In extreme cases, we may remove the connector from our web site.</p>
</div>
</div>
<div class="sect2">
<h3 id="_3_3_results">3.3 Results</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Support Training:</strong> Mule Support team will provide T1 support and will help the customer to isolated the issue to identify if the issue is a Mule issue or a connector issue. The objective of this birth view training is to provide to the support team a general understanding of the connector and tools that help to isolate the problem.</p>
</li>
<li>
<p><strong>Upload to Library:</strong> Connector will be upload in the <a href="https://www.mulesoft.com/library">Mule Connectors Library</a>. After your connector passes the Certification Process, MuleSoft sends you an estimated date for when your connector will appear on the MuleSoft web site. As part of this process, the following information need to be provided:</p>
<div class="ulist">
<ul>
<li>
<p>High Level description of the connector. SalesForce connector could be use a template example: <a href="https://www.mulesoft.com/library#!/salesforce-integration-connector?types=connector" class="bare">https://www.mulesoft.com/library#!/salesforce-integration-connector?types=connector</a></p>
</li>
<li>
<p>URL to Release Notes</p>
</li>
<li>
<p>URL to Functional documentation of the connector</p>
</li>
<li>
<p>URL to DevKit generated documentation</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stage_4_publish">Stage 4: Publish</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Finally, the connector will be available in MueSoft Connector Library (<a href="https://www.mulesoft.com/library" class="bare">https://www.mulesoft.com/library</a>)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_release_re_certification">Release Re-Certification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mule ESB and Anypoint Studio have a release cadence of 3 month cycles. Even the fact that Mule ESB and Mule Studio will be focus on maintaining forward compatibility for all develop connectors there is a small probability that issues related to classloader problems or data mapping could arise. Due to that, it’s required that a regression testing using the released version of Mule ESB and Mule Studio be executed. Early access to binaries will be provided to run the re-certification. It’s important to point out that the certification must be run over the already released connector</p>
</div>
</div>
</div>
<h1 id="_coding_standards_and_best_practices" class="sect0">Coding Standards and Best Practices</h1>
<div class="openblock partintro">
<div class="content">
<hr>
<div class="paragraph">
<p>This section is about best development practices, these are a set of rules that the connector development community has learned over time which can help improve the quality of your connector.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_code_conventions">Code Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This sections covers the following areas:</p>
</div>
<div class="paragraph">
<p>Standard Java Coding Conventions
. DevKit Standards and Best Practices
. Maven Conventions and Setup
. Connector Demo Example</p>
</div>
<div class="paragraph">
<p>It&#8217;s important to point out that in the following steps of the certification most of this practices will be validated using automated tools such as SonarQue.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_standard_java_coding_conventions">Standard Java Coding Conventions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_static_analysis_rules">Static Analysis Rules</h3>
<div class="paragraph">
<p>We have defined as set of static inspections rules that are enforced by SonarQube. This rules are aimed to detect potential bugs and bad coding practices.
More details about this could be found in the section <a href="http://mulesoft.github.io/connector-certification-docs/current/user-manual.html#_static_code_analysis_with_sonarqube">Static Code Analysis &amp; Code Coverage</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maven_conventions_and_setup">Maven Conventions and Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following section describes set of conventions and best practices to follow at the time to define your connector Maven project structure.</p>
</div>
<div class="sect2">
<h3 id="_best_practices">Best Practices</h3>
<div class="paragraph">
<p>Despite a connector&#8217;s code could be 100% sure, and it works perfectly fine in an isolated environment, every connector we build must work in a Mule environment.</p>
</div>
<div class="paragraph">
<p>This means that a some constraints could apply, here are the key ones:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Follow Maven default name conventions <a href="http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html" class="bare">http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html</a></p>
</li>
<li>
<p>Do not overwrite org.mule.tools.devkit:mule-devkit-parent properties.</p>
</li>
<li>
<p>Do not reference SNAPSHOT dependencies either in plugins or dependencies.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="__strong_avoid_caching_strong"><strong>Avoid caching</strong></h3>
<div class="paragraph">
<p>Connectors should not hold state, unless is strictly necessary. Several APIs are actually hosted in cloud environments, and therefore caching states ends up in having untrusted data in the connector.
There are a few cases where the connector might need to save some data of the current API while working on it, which leads into caching.</p>
</div>
<div class="paragraph">
<p>For those scenarios where <strong>the connector needs caching no matter what, the following code should be used</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// 1) the connector ask for the manager of the Object Store</span>
<span class="annotation">@Inject</span>
<span class="directive">protected</span> ObjectStoreManager objectStoreManager;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then use the manager to get/create a custom Object Store as follow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// 2) the connector ask mule for the Object Store represented by &quot;some ID&quot;</span>
ObjectStore&lt;? <span class="directive">extends</span> <span class="predefined-type">Serializable</span>&gt; os = objectStoreManager.getObjectStore(<span class="string"><span class="delimiter">&quot;</span><span class="content">some ID</span><span class="delimiter">&quot;</span></span>);
<span class="comment">// 3) then it uses it</span>
os.store(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other way to achieve caching could be through temporal files, but it might depend on the use case.</p>
</div>
</div>
<div class="sect2">
<h3 id="__strong_avoid_spawning_threads_strong"><strong>Avoid spawning threads</strong></h3>
<div class="paragraph">
<p>Same as caching, spawning threads is not recommended in a connector as a common API lives in the cloud. This means that a connector won&#8217;t improve its throughput with more threads, because every communication with the API means more HTTP requests/responses. Although we don&#8217;t recommend using threads, as caching, there might be custom cases where they are actually needed.</p>
</div>
<div class="paragraph">
<p>For those scenarios where <strong>the connector needs to spawn threads</strong> you should use a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html">Executor Service</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="__strong_reading_resources_from_within_the_connector_strong"><strong>Reading resources from within the connector</strong></h3>
<div class="paragraph">
<p>When reading resources that are bundled with the connector, the usual <code>getClass().getResourceAsStream("custom-file-to-read.txt")</code> will work great. But if the file <code>"custom-file-to-read.txt"</code> can actually be parametrized through the mule application, then other mechanism should be used.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say that for your connector, a file can be feeded from the src/main/resources folder (again, this file comes from Studio, not from the connector), the following code should be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// 1) the connector ask for the manager of the mule context</span>
<span class="annotation">@Inject</span>
<span class="directive">protected</span> MuleContext muleContext;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then read the resources as follow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">ClassLoader</span> classLoader = muleContext.getExecutionClassLoader();
<span class="predefined-type">URL</span> resourceURL = classLoader.getResource(<span class="string"><span class="delimiter">&quot;</span><span class="content">custom-file-to-read.txt</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>"custom-file-to-read.txt"</code> is the file to be read from the mule app in <code>src/main/resources/custom-file-to-read.txt</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="__strong_mule_dependencies_strong"><strong>Mule dependencies</strong></h3>
<div class="paragraph">
<p>Adding dependencies in your connector should be careful task, as it might collide with mule ones.
So, a few constraints might apply, such as:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When adding mule artefacts, always use <code>&lt;scope&gt;provided&lt;/scope&gt;</code></p>
</li>
<li>
<p>When adding artefacts that might collide with mule, choose the versions that are in the current mule version your connector is going to work with. Some of those artefacts are: cxf, jersey, spring, guava, etc.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="__strong_shading_strong"><strong>Shading</strong></h3>
<div class="paragraph">
<p>For some corner cases, you might need to add a dependency that does collide with mule ones. For those scenarios, we strongly recommend you to use the same version of the library as mule does, and if this is an impossible taks, then change your library to another one.
If you still need that custom library that collides with mule, then shading could work for you.</p>
</div>
<div class="paragraph">
<p>You need to modify your connector&#8217;s <code>pom.xml</code> file to add the shading plugin in order to achieve 2 things: 1) add the custom jar into the connector&#8217;s one and 2) rename the packages of the library into a new one in order to avoid collisions.</p>
</div>
<div class="paragraph">
<p>The following snippet should work when using a library that the full qualified name of the packages are <code>org.some.library</code> and the artefact id is <code>custom-artefact-id</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;plugin&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>maven-shade-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.3<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;configuration&gt;</span>
        <span class="comment">&lt;!-- custom shade configuration --&gt;</span>
        <span class="tag">&lt;artifactSet&gt;</span>
            <span class="tag">&lt;includes&gt;</span>
                <span class="tag">&lt;include&gt;</span>org.some.library:custom-artefact-id<span class="tag">&lt;/include&gt;</span>
            <span class="tag">&lt;/includes&gt;</span>
        <span class="tag">&lt;/artifactSet&gt;</span>
        <span class="tag">&lt;relocations&gt;</span>
            <span class="tag">&lt;relocation&gt;</span>
                <span class="tag">&lt;pattern&gt;</span>org.some.library<span class="tag">&lt;/pattern&gt;</span>
                <span class="tag">&lt;shadedPattern&gt;</span>org.some.library.new.pakage.name.shade<span class="tag">&lt;/shadedPattern&gt;</span>
            <span class="tag">&lt;/relocation&gt;</span>
        <span class="tag">&lt;/relocations&gt;</span>
    <span class="tag">&lt;/configuration&gt;</span>
<span class="tag">&lt;/plugin&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_connector_structure">Connector Structure</h3>
<div class="paragraph">
<p>If you create your connector project using the DevKit Studio Plugin, the structure generates by default is the recommended approach.
If you are interested in more details, the project directory structure are described in the <em>Appendix C</em>.</p>
</div>
<div class="paragraph">
<p>In order to provide automatic enforcement of this rules, the following plugin must be configure as part of the connectors pom.xml. I will be responsible for validating the project structure.
Copy and paste the following snippets in your connector pom.xml:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;build&gt;</span>
    ...
    <span class="tag">&lt;plugins&gt;</span>
        ...
       <span class="tag">&lt;plugin&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.mule.certification<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>project-structure-validation<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>1.0.4<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;executions&gt;</span>
                <span class="tag">&lt;execution&gt;</span>
                    <span class="tag">&lt;phase&gt;</span>package<span class="tag">&lt;/phase&gt;</span>
                    <span class="tag">&lt;goals&gt;</span>
                        <span class="tag">&lt;goal&gt;</span>y<span class="tag">&lt;/goal&gt;</span>
                    <span class="tag">&lt;/goals&gt;</span>
                <span class="tag">&lt;/execution&gt;</span>
            <span class="tag">&lt;/executions&gt;</span>
        <span class="tag">&lt;/plugin&gt;</span>
        ...
    <span class="tag">&lt;/plugins&gt;</span>
    ...
<span class="tag">&lt;/build&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_devkit_standards_and_best_practices">DevKit Standards and Best Practices</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_datamapper_compliance">DataMapper Compliance</h3>
<div class="paragraph">
<p>To have the best experience in Anypoint Studio, connectors must be DataMapper compliant. To achieve this, all operations must follow these recommendations.</p>
</div>
<div class="paragraph">
<p>Any argument, returned or received, must be one of the following data types:
. Map
. POJO
. List&lt;Map&gt;
. List&lt;String&gt;
. List&lt;POJO&gt;
. List&lt;List&lt;String&gt;&gt;</p>
</div>
<div class="paragraph">
<p>These types must be part of the method signature so that DataMapper can auto-recognize the types in it&#8217;s mapping UI.</p>
</div>
<div class="paragraph">
<p><em>Important</em>: Only use a map if you cannot use a POJO.
Only use a map if your data:
. Is schemaless, for example if created using MongoDB.
. Has user customizable schemas, if created with Salesforce.
. Has unknown content.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Good Example</th>
<th class="tableblock halign-left valign-top">Bad Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List&lt;Map&gt; query()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List&lt;DBObject&gt; query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">void send(Invoice invoice)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">void send(Object object)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invoice getInvoice(String id)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object get(String id, Class typeToCreate)
</p><p class="tableblock">All operations must have a single object to take input from DataMapper. The object must be a single object, not multiple arguments. This object is called the Primary argument.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Good Example</th>
<th class="tableblock halign-left valign-top">Bad Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">void createInvoice(Invoice invoice)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createInvoice(Header header, List&lt;LineItems&gt; lineItems)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">void upsert(List&lt;Map&gt; sobjects, String type, String externalFieldId)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A - Multiple arguments are still needed!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GetTaxResult getTax(TaxRequest request)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>public GetTaxResult getTax(String companyCode,<br>
    AvalaraDocumentType docType,<br>
    @Optional String docCode,<br>
    Date docDate,<br>
    @Optional String salespersonCode,<br>
    String customerCode,<br>
    @Optional String customerUsageType,<br>
    String discount,<br>
    @Optional String purchaseOrderNo)<br>
</code></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_annotations">Annotations</h3>
<div class="paragraph">
<p>If you have multiple arguments, annotate the Primary argument with:</p>
</div>
<div class="paragraph">
<p><code>@Default("#[payload]")</code></p>
</div>
<div class="paragraph">
<p>This way DataMapper knows which argument in the operation to use for mapping.</p>
</div>
</div>
<div class="sect2">
<h3 id="_devkit_generated_api_doc">DevKit Generated API Doc</h3>
<div class="paragraph">
<p>Connector documentation is composed of two different type of documentation: DevKit Generated DevKit API Doc and the Connector Documentation.</p>
</div>
<div class="paragraph">
<p>DevKit API Doc is automatically generated by DevKit based on the JavaDoc documentation at the connector class. This is one of the most important information used by the developer at the time of of using the connector.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connector_demo_example">Connector Demo Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Mule application&#8217;s endpoints allow a user to interact with the service and API using the connector. Endpoints are committed to the GitHub repository along with source code. Use services or API use cases to determine which connector operations to select.</p>
</div>
<div class="paragraph">
<p>Creation criteria:
. Ensure that an app can be run by entering credentials without additional configuration or connector installation.
. Use placeholders for credentials.
. Ensure that flow names and message processors display names that make the use case easy to understand.
. Provide instructions on how to run the app in the README.md file of the GitHub demo (example <a href="https://github.com/mulesoft/sqs-connector/tree/master/demo">SQS</a>).
. Expose a set of endpoints that the user can access following the steps in the README.md to reproduce a use case. An example is the <a href="https://github.com/mulesoft/sqs-connector/tree/master/demo">SQS</a> demo.
. Consider implementing a CRUD (or similar) use case with chained processors whose payloads get logged into the Studio console (for example, <a href="https://github.com/mulesoft/s3-connector/tree/master/demo/s3connectorstudiodemo">S3</a>).
. Use DataMapper for Standard or Premium connectors' CRUD (or a similar) use case if API methods attributes and/or return types allow it.
. Consider basic error handling in the Mule app.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix">Appendix</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/mulesoft/connector-certification-docs/blob/docs/current/attachments/development/appendixA.adoc">Appendix A</a></p>
</li>
<li>
<p><a href="https://github.com/mulesoft/connector-certification-docs/blob/docs/current/attachments/development/appendixB.adoc">Appendix B</a></p>
</li>
<li>
<p><a href="https://github.com/mulesoft/connector-certification-docs/blob/docs/current/attachments/development/appendixC.adoc">Appendix C</a></p>
</li>
<li>
<p><a href="https://github.com/mulesoft/connector-certification-docs/blob/docs/current/attachments/development/appendixD.adoc">Appendix D</a></p>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_static_code_analysis_and_code_coverage" class="sect0">Static Code Analysis and Code Coverage</h1>
<div class="openblock partintro">
<div class="content">
<hr>
<div class="paragraph">
<p>Unresolved directive in user-manual.adoc - include::docs/sonarqube.adoc[]</p>
</div>
</div>
</div>
<h1 id="_automated_functional_testing" class="sect0">Automated Functional Testing</h1>
<div class="openblock partintro">
<div class="content">
<hr>
<div class="paragraph">
<p>Unresolved directive in user-manual.adoc - include::docs/functional-qa-guidelines.adoc[]</p>
</div>
</div>
</div>
<h1 id="_studio_functional_test_plugin" class="sect0">Studio Functional Test Plugin</h1>
<div class="openblock partintro">
<div class="content">
<hr>
<div class="paragraph">
<p>Unresolved directive in user-manual.adoc - include::docs/functional-test-plugin.adoc[]</p>
</div>
</div>
</div>
<h1 id="_studio_interoperability_test_plugin" class="sect0">Studio Interoperability Test Plugin</h1>
<div class="openblock partintro">
<div class="content">
<hr>
<div class="paragraph">
<p>Unresolved directive in user-manual.adoc - include::docs/studio-interopetability-test-plugin.adoc[]</p>
</div>
</div>
</div>
<h1 id="_studio_interoperability_qa" class="sect0">Studio Interoperability QA</h1>
<div class="openblock partintro">
<div class="content">
<hr>
<div class="paragraph">
<p>Unresolved directive in user-manual.adoc - include::docs/studio-interopetability-QA-guidelines.adoc[]
Unresolved directive in user-manual.adoc - include::docs/studio-interopetability-QA-guidelines-2.adoc[]</p>
</div>
</div>
</div>
<h1 id="_templates" class="sect0">Templates</h1>
<div class="openblock partintro">
<div class="content">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_anypoint_connectors_documentation_template">Anypoint Connectors Documentation Template</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/mulesoft/connector-certification-docs/blob/docs/current/attachments/templates/documentationTemplate.adoc">Documentation Template</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anypoint_connectors_release_notes_template">Anypoint Connectors Release Notes Template</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/mulesoft/connector-certification-docs/blob/docs/current/attachments/templates/releaseNotesTemplate.adoc">Release Notes Template</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anypoint_connectors_manual_test_suite_template">Anypoint Connectors Manual Test Suite Template</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://docs.google.com/a/mulesoft.com/spreadsheets/d/1xqwGw5msku30sfjx6bpJDP9wZZ15cP2TcEzEq6pM9QM/edit?usp=sharing">Manual Test Suite Template</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_certification_checklist">Certification Checklist</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Download and complete the document along the process.</p>
</div>
<div class="paragraph">
<p><a href="https://drive.google.com/file/d/0B8N265C555thOG5HZDRTOTEtUXM/view?usp=sharing" class="bare">https://drive.google.com/file/d/0B8N265C555thOG5HZDRTOTEtUXM/view?usp=sharing</a></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-02-06 14:28:01 EST
</div>
</div>
</body>
</html>